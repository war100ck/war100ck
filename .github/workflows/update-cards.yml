name: Update GitHub Cards
on:
  schedule:
    - cron: '0 */6 * * *'  # –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
  workflow_dispatch:        # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
  push:
    branches: [ main ]
    paths:
      - '.github/workflows/update-cards.yml'

permissions:
  contents: write

jobs:
  update-cards:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Create cards directory
        run: mkdir -p assets/cards
      
      # –°–∫–∞—á–∏–≤–∞–µ–º –≤—Å–µ 6 –∫–∞—Ä—Ç–æ—á–µ–∫
      - name: Download card 1
        run: curl -s "https://github-readme-stats.vercel.app/api/pin/?username=war100ck&repo=blade-soul-game-launcher&theme=default&hide_border=true&bg_color=30,0d1117,0078D6&title_color=fff&text_color=fff&v=2" -o "assets/cards/card1.svg"
      
      - name: Download card 2
        run: curl -s "https://github-readme-stats.vercel.app/api/pin/?username=war100ck&repo=BNS-Server-Manager&theme=default&hide_border=true&bg_color=30,0d1117,0078D6&title_color=fff&text_color=fff&v=2" -o "assets/cards/card2.svg"
      
      - name: Download card 3
        run: curl -s "https://github-readme-stats.vercel.app/api/pin/?username=war100ck&repo=BnS-Api-Server&theme=default&hide_border=true&bg_color=30,0d1117,0078D6&title_color=fff&text_color=fff&v=2" -o "assets/cards/card3.svg"
      
      - name: Download card 4
        run: curl -s "https://github-readme-stats.vercel.app/api/pin/?username=war100ck&repo=Server-Api-BnS-2017&theme=default&hide_border=true&bg_color=30,0d1117,0078D6&title_color=fff&text_color=fff&v=2" -o "assets/cards/card4.svg"
      
      - name: Download card 5
        run: curl -s "https://github-readme-stats.vercel.app/api/pin/?username=war100ck&repo=Steam-Account-Manager&theme=default&hide_border=true&bg_color=30,0d1117,0078D6&title_color=fff&text_color=fff&v=2" -o "assets/cards/card5.svg"
      
      - name: Download card 6
        run: curl -s "https://github-readme-stats.vercel.app/api/pin/?username=war100ck&repo=bns-client-packer&theme=default&hide_border=true&bg_color=30,0d1117,0078D6&title_color=fff&text_color=fff&v=10" -o "assets/cards/card6.svg"
      
      - name: Commit and push changes
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          
          git add assets/cards/
          
          if git diff --staged --quiet; then
            echo "No changes to commit"
          else
            git commit -m "üîÑ Auto-update GitHub cards: $(date '+%Y-%m-%d %H:%M:%S')"
            git push
          fi